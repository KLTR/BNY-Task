(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{vfUp:function(t,e,r){"use strict";r.r(e),r.d(e,"CustomersModule",(function(){return N}));var n=r("PCNd"),o=r("tyNb"),i=r("mrSG"),c=r("fXoL"),s=r("yWAI"),a=r("bEMC"),d=r("OsF4"),b=r("3Pt+");let l=(()=>{class t{constructor(){this.model={filter:null},this.changed=new c.n}filterChanged(t){t.preventDefault(),this.changed.emit(this.model.filter)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Eb({type:t,selectors:[["cm-filter-textbox"]],outputs:{changed:"changed"},decls:3,vars:1,consts:[["type","text","name","filter",3,"ngModel","ngModelChange","keyup"]],template:function(t,e){1&t&&(c.Qb(0,"form"),c.tc(1," Filter: "),c.Qb(2,"input",0),c.Yb("ngModelChange",(function(t){return e.model.filter=t}))("keyup",(function(t){return e.filterChanged(t)})),c.Pb(),c.Pb()),2&t&&(c.zb(2),c.gc("ngModel",e.model.filter))},directives:[b.r,b.i,b.j,b.a,b.h,b.k],styles:["cm-filter-textbox[_ngcontent-%COMP%]{margin-top:5px}"]}),t})();var u=r("MPuK"),m=r("ofXK"),p=r("vTEt");let g=(()=>{class t{transform(t){return t?t.trim():""}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=c.Jb({name:"trim",type:t,pure:!0}),t})();const h=function(t){return["/customers",t,"details"]},f=function(t){return["/customers",t,"edit"]},P=function(t){return["/customers",t,"orders"]};function y(t,e){if(1&t&&(c.Qb(0,"div",4),c.Qb(1,"div",5),c.Qb(2,"div",6),c.Qb(3,"a",7),c.tc(4),c.bc(5,"capitalize"),c.bc(6,"capitalize"),c.Pb(),c.Qb(7,"a",8),c.Lb(8,"i",9),c.Pb(),c.Pb(),c.Qb(9,"div",10),c.Qb(10,"div",11),c.Qb(11,"div",12),c.Qb(12,"a",13),c.Lb(13,"img",14),c.bc(14,"lowercase"),c.Pb(),c.Pb(),c.Qb(15,"div",15),c.Qb(16,"div",16),c.tc(17),c.bc(18,"trim"),c.Pb(),c.Qb(19,"a",8),c.tc(20,"View Orders"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t){const t=e.$implicit;c.zb(3),c.gc("routerLink",c.jc(16,h,t.id)),c.zb(1),c.wc(" ",c.cc(5,8,t.firstName)," ",c.cc(6,10,t.lastName)," "),c.zb(3),c.gc("routerLink",c.jc(18,f,t.id)),c.zb(6),c.hc("src","assets/images/",c.cc(14,12,t.gender),".png",c.oc),c.zb(4),c.wc("",c.cc(18,14,t.city),", ",t.state.name,""),c.zb(2),c.gc("routerLink",c.jc(20,P,t.id))}}function C(t,e){1&t&&(c.Qb(0,"div"),c.tc(1," No Records Found "),c.Pb())}let v=(()=>{class t{constructor(t){this.trackbyService=t,this.customers=[]}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(u.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["cm-customers-card"]],inputs:{customers:"customers"},decls:4,vars:3,consts:[[1,"container"],[1,"row","card-container"],["class","col-sm-6 col-md-4 col-lg-3",4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"col-sm-6","col-md-4","col-lg-3"],[1,"card"],[1,"card-header"],[1,"white",3,"routerLink"],[3,"routerLink"],["title","Edit",1,"pull-right","glyphicon","glyphicon-edit","edit-icon","white"],[1,"card-body"],[1,"clearfix"],[1,"pull-left","card-body-left"],["href","#",1,"white"],[1,"card-image",3,"src"],[1,"pull-left","card-body-right"],[1,"card-body-content"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.sc(2,y,21,22,"div",2),c.sc(3,C,2,0,"div",3),c.Pb(),c.Pb()),2&t&&(c.zb(2),c.gc("ngForOf",e.customers)("ngForTrackBy",e.trackbyService.customer),c.zb(1),c.gc("ngIf",!e.customers.length))},directives:[m.k,m.l,o.d],pipes:[p.a,m.i,g],styles:[".card-container[_ngcontent-%COMP%]{width:85%}.card[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #d4d4d4;height:120px;margin-bottom:20px;position:relative}.card-header[_ngcontent-%COMP%]{background-color:#027ff4;font-size:14pt;color:#fff;padding:5px;width:100%}.card-close[_ngcontent-%COMP%]{color:#fff;font-weight:700;margin-right:5px}.card-body[_ngcontent-%COMP%]{padding-left:5px}.card-body-left[_ngcontent-%COMP%]{margin-top:-5px}.card-body-right[_ngcontent-%COMP%]{margin-left:20px;margin-top:2px}.card-body-content[_ngcontent-%COMP%]{width:100px}.card-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}.white[_ngcontent-%COMP%], .white[_ngcontent-%COMP%]:hover{color:#fff}"],changeDetection:0}),t})();var Q=r("+Obw");let M=(()=>{class t{constructor(){this.sorted=new c.n}set sortBy(t){this.sortProperty=t}onClick(){event.preventDefault(),this.sorted.next(this.sortProperty)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=c.Fb({type:t,selectors:[["","cmSortBy",""]],hostBindings:function(t,e){1&t&&c.Yb("click",(function(){return e.onClick()}))},inputs:{sortBy:["cmSortBy","sortBy"]},outputs:{sorted:"sorted"}}),t})();const w=function(t){return["/customers",t,"details"]},z=function(t){return["/customers",t,"orders"]};function k(t,e){if(1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.Lb(2,"img",13),c.bc(3,"lowercase"),c.Pb(),c.Qb(4,"td"),c.Qb(5,"a",14),c.tc(6),c.bc(7,"capitalize"),c.Pb(),c.Pb(),c.Qb(8,"td"),c.tc(9),c.bc(10,"capitalize"),c.Pb(),c.Qb(11,"td"),c.tc(12),c.Pb(),c.Qb(13,"td"),c.tc(14),c.bc(15,"trim"),c.Pb(),c.Qb(16,"td"),c.tc(17),c.Pb(),c.Qb(18,"td"),c.tc(19),c.bc(20,"currency"),c.Pb(),c.Qb(21,"td"),c.Qb(22,"a",14),c.tc(23,"View Orders"),c.Pb(),c.Pb(),c.Pb()),2&t){const t=e.$implicit;c.zb(2),c.hc("src","assets/images/",c.cc(3,9,t.gender),".png",c.oc),c.zb(3),c.gc("routerLink",c.jc(21,w,t.id)),c.zb(1),c.uc(c.cc(7,11,t.firstName)),c.zb(3),c.uc(c.cc(10,13,t.lastName)),c.zb(3),c.uc(t.address),c.zb(2),c.uc(c.cc(15,15,t.city)),c.zb(3),c.uc(t.state.name),c.zb(2),c.uc(c.dc(20,17,t.orderTotal,"USD","symbol")),c.zb(3),c.gc("routerLink",c.jc(23,z,t.id))}}function O(t,e){1&t&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.tc(2,"\xa0"),c.Pb(),c.Qb(3,"td",15),c.tc(4,"No Records Found"),c.Pb(),c.Pb())}let x=(()=>{class t{constructor(t,e){this.sorterService=t,this.trackbyService=e,this.customers=[]}ngOnInit(){}sort(t){this.customers=this.sorterService.sort(this.customers,t)}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(Q.a),c.Kb(u.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["cm-customers-grid"]],inputs:{customers:"customers"},decls:26,vars:3,consts:[[1,"container"],[1,"row","grid-container"],[1,"col-md-10"],[1,"table"],[1,"table","table-striped","table-hover"],["cmSortBy","firstName",3,"sorted"],["cmSortBy","lastName",3,"sorted"],["cmSortBy","address",3,"sorted"],["cmSortBy","city",3,"sorted"],["cmSortBy","state.name",3,"sorted"],[3,"click"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["alt","Customer Image",1,"grid-image",3,"src"],[3,"routerLink"],["colspan","7"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Qb(4,"table",4),c.Qb(5,"thead"),c.Qb(6,"tr"),c.Qb(7,"th"),c.tc(8,"\xa0"),c.Pb(),c.Qb(9,"th",5),c.Yb("sorted",(function(t){return e.sort(t)})),c.tc(10,"First Name"),c.Pb(),c.Qb(11,"th",6),c.Yb("sorted",(function(t){return e.sort(t)})),c.tc(12,"Last Name"),c.Pb(),c.Qb(13,"th",7),c.Yb("sorted",(function(t){return e.sort(t)})),c.tc(14,"Address"),c.Pb(),c.Qb(15,"th",8),c.Yb("sorted",(function(t){return e.sort(t)})),c.tc(16,"City"),c.Pb(),c.Qb(17,"th",9),c.Yb("sorted",(function(t){return e.sort(t)})),c.tc(18,"State"),c.Pb(),c.Qb(19,"th",10),c.Yb("click",(function(){return e.sort("orderTotal")})),c.tc(20,"Order Total"),c.Pb(),c.Qb(21,"th"),c.tc(22,"\xa0"),c.Pb(),c.Pb(),c.Pb(),c.Qb(23,"tbody"),c.sc(24,k,24,25,"tr",11),c.sc(25,O,5,0,"tr",12),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(24),c.gc("ngForOf",e.customers)("ngForTrackBy",e.trackbyService.customer),c.zb(1),c.gc("ngIf",!e.customers.length))},directives:[M,m.k,m.l,o.d],pipes:[m.i,p.a,g,m.c],styles:[".grid-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{padding-left:0}.grid-container[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.grid-image[_ngcontent-%COMP%]{height:50px;width:50px;margin-top:10px}"],changeDetection:0}),t})();var S=r("Exvd");const L=["mapsContainer"];let F=(()=>{class t{constructor(t,e,r,n){this.componentFactoryResolver=t,this.dataService=e,this.filterService=r,this.logger=n,this.customers=[],this.displayModeEnum=_,this.totalRecords=0,this.pageSize=10,this._filteredCustomers=[]}get filteredCustomers(){return this._filteredCustomers}set filteredCustomers(t){this._filteredCustomers=t,this.updateMapComponentDataPoints()}ngOnInit(){this.title="Customers",this.filterText="Filter Customers:",this.displayMode=_.Card,this.getCustomersPage(1)}changeDisplayMode(t){this.displayMode=t}pageChanged(t){this.getCustomersPage(t)}getCustomersPage(t){this.dataService.getCustomersPage((t-1)*this.pageSize,this.pageSize).subscribe(t=>{this.customers=this.filteredCustomers=t.results,this.totalRecords=t.totalRecords},t=>this.logger.log(t),()=>this.logger.log("getCustomersPage() retrieved customers for page: "+t))}filterChanged(t){t&&this.customers?(t=t.toUpperCase(),this.filteredCustomers=this.filterService.filter(this.customers,t,["firstName","lastName","city","state.name"])):this.filteredCustomers=this.customers}lazyLoadMapComponent(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.changeDisplayMode(_.Map),!this.mapsViewContainerRef.length){const{MapComponent:t}=yield r.e(2).then(r.bind(null,"ISAC"));console.log("Lazy loaded map component!");const e=this.componentFactoryResolver.resolveComponentFactory(t);this.mapComponentRef=this.mapsViewContainerRef.createComponent(e),this.mapComponentRef.instance.zoom=2,this.mapComponentRef.instance.dataPoints=this.filteredCustomers,this.mapComponentRef.instance.enabled=!0}}))}updateMapComponentDataPoints(){this.mapComponentRef&&(this.mapComponentRef.instance.dataPoints=this.filteredCustomers)}}return t.\u0275fac=function(e){return new(e||t)(c.Kb(c.j),c.Kb(s.a),c.Kb(a.a),c.Kb(d.a))},t.\u0275cmp=c.Eb({type:t,selectors:[["cm-customers"]],viewQuery:function(t,e){var r;1&t&&c.xc(L,!0,c.N),2&t&&c.lc(r=c.Zb())&&(e.mapsViewContainerRef=r.first)},decls:34,vars:14,consts:[[1,"customers","view","indent"],[1,"container"],[1,"glyphicon","glyphicon-user"],[1,"row"],[1,"col-md-10"],[1,"navbar"],[1,"nav","navbar-nav"],[1,"toolbar-item"],[3,"click"],[1,"glyphicon","glyphicon-th-large"],[1,"glyphicon","glyphicon-align-justify"],[1,"glyphicon","glyphicon-map-marker"],["routerLink","/customers/0/edit"],[1,"glyphicon","glyphicon-plus"],[1,"navbar-right",3,"changed"],[3,"customers","hidden"],[3,"hidden"],["mapsContainer",""],[3,"totalItems","pageSize","pageChanged"]],template:function(t,e){1&t&&(c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"header"),c.Qb(3,"h3"),c.Lb(4,"span",2),c.tc(5),c.Pb(),c.Pb(),c.Lb(6,"br"),c.Qb(7,"div",3),c.Qb(8,"div",4),c.Qb(9,"div",5),c.Qb(10,"ul",6),c.Qb(11,"li",7),c.Qb(12,"a",8),c.Yb("click",(function(){return e.changeDisplayMode(e.displayModeEnum.Card)})),c.Lb(13,"span",9),c.tc(14," Card View "),c.Pb(),c.Pb(),c.Qb(15,"li",7),c.Qb(16,"a",8),c.Yb("click",(function(){return e.changeDisplayMode(e.displayModeEnum.Grid)})),c.Lb(17,"span",10),c.tc(18," List View "),c.Pb(),c.Pb(),c.Qb(19,"li",7),c.Qb(20,"a",8),c.Yb("click",(function(){return e.lazyLoadMapComponent()})),c.Lb(21,"span",11),c.tc(22," Map View "),c.Pb(),c.Pb(),c.Qb(23,"li",7),c.Qb(24,"a",12),c.Lb(25,"span",13),c.tc(26," New Customer "),c.Pb(),c.Pb(),c.Pb(),c.Qb(27,"cm-filter-textbox",14),c.Yb("changed",(function(t){return e.filterChanged(t)})),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Lb(28,"cm-customers-card",15),c.Lb(29,"cm-customers-grid",15),c.Qb(30,"div",16),c.Mb(31,null,17),c.Pb(),c.Qb(33,"cm-pagination",18),c.Yb("pageChanged",(function(t){return e.pageChanged(t)})),c.Pb(),c.Pb(),c.Pb()),2&t&&(c.zb(5),c.vc(" ",e.title," "),c.zb(7),c.Cb("active",e.displayMode===e.displayModeEnum.Card),c.zb(4),c.Cb("active",e.displayMode===e.displayModeEnum.Grid),c.zb(4),c.Cb("active",e.displayMode===e.displayModeEnum.Map),c.zb(8),c.gc("customers",e.filteredCustomers)("hidden",e.displayMode!==e.displayModeEnum.Card),c.zb(1),c.gc("customers",e.filteredCustomers)("hidden",e.displayMode!==e.displayModeEnum.Grid),c.zb(1),c.gc("hidden",e.displayMode!==e.displayModeEnum.Map),c.zb(3),c.gc("totalItems",e.totalRecords)("pageSize",e.pageSize))},directives:[o.d,l,v,x,S.a],encapsulation:2}),t})();var _=function(t){return t[t.Card=0]="Card",t[t.Grid=1]="Grid",t[t.Map=2]="Map",t}({});const E=[{path:"",component:F}];let R=(()=>{class t{}return t.components=[F,v,x],t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[o.e.forChild(E)],o.e]}),t})(),N=(()=>{class t{}return t.\u0275mod=c.Ib({type:t}),t.\u0275inj=c.Hb({factory:function(e){return new(e||t)},imports:[[R,n.a]]}),t})()}}]);