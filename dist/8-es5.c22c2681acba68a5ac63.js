function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{d7gL:function(e,t,n){"use strict";n.r(t),n.d(t,"CustomerModule",(function(){return D}));var r,c=n("PCNd"),o=n("tyNb"),i=n("fXoL"),a=((r=function(){function e(t){_classCallCheck(this,e),this.router=t}return _createClass(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||r)(i.Kb(o.b))},r.\u0275cmp=i.Eb({type:r,selectors:[["cm-orders"]],decls:27,vars:0,consts:[[1,"orders","view"],[1,"container"],[1,"glyphicon","glyphicon-user"],[1,"navbar"],[1,"nav","navbar-nav"],[1,"toolbar-item"],["routerLink","details","routerLinkActive","active"],[1,"glyphicon","glyphicon-list"],["routerLink","orders","routerLinkActive","active"],[1,"glyphicon","glyphicon-tags"],["routerLink","edit","routerLinkActive","active"],[1,"glyphicon","glyphicon-edit"],["routerLink","/customers"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.Qb(1,"div",1),i.Qb(2,"header"),i.Qb(3,"h3"),i.Lb(4,"span",2),i.tc(5,"\xa0\xa0Customer Information"),i.Pb(),i.Pb(),i.Lb(6,"br"),i.Qb(7,"div",3),i.Qb(8,"ul",4),i.Qb(9,"li",5),i.Qb(10,"a",6),i.Lb(11,"span",7),i.tc(12,"\xa0\xa0Customer Details "),i.Pb(),i.Pb(),i.Qb(13,"li",5),i.Qb(14,"a",8),i.Lb(15,"span",9),i.tc(16,"\xa0\xa0Customer Orders "),i.Pb(),i.Pb(),i.Qb(17,"li",5),i.Qb(18,"a",10),i.Lb(19,"span",11),i.tc(20,"\xa0\xa0Edit Customer "),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.Qb(21,"div",1),i.Lb(22,"router-outlet"),i.Lb(23,"br"),i.Lb(24,"br"),i.Qb(25,"a",12),i.tc(26,"View all Customers"),i.Pb(),i.Pb(),i.Pb(),i.Pb())},directives:[o.d,o.c,o.f],encapsulation:2}),r),s=n("yWAI"),b=n("ofXK"),u=n("vTEt");function l(e,t){if(1&e&&(i.Qb(0,"tr"),i.Qb(1,"td"),i.tc(2),i.Pb(),i.Qb(3,"td",6),i.tc(4),i.bc(5,"currency"),i.Pb(),i.Pb()),2&e){var n=t.$implicit;i.zb(2),i.uc(n.productName),i.zb(2),i.uc(i.dc(5,2,n.itemCost,"USD","symbol"))}}function d(e,t){if(1&e&&(i.Qb(0,"div",2),i.Qb(1,"h4"),i.tc(2),i.bc(3,"capitalize"),i.bc(4,"capitalize"),i.Pb(),i.Lb(5,"br"),i.Qb(6,"table",3),i.sc(7,l,6,6,"tr",4),i.Qb(8,"tr",5),i.Qb(9,"td"),i.tc(10,"\xa0"),i.Pb(),i.Qb(11,"td",6),i.tc(12),i.bc(13,"currency"),i.Pb(),i.Pb(),i.Pb(),i.Pb()),2&e){var n=i.ac();i.zb(2),i.wc("Orders for ",i.cc(3,5,n.customer.firstName)," ",i.cc(4,7,n.customer.lastName),""),i.zb(5),i.gc("ngForOf",n.customer.orders)("ngForTrackBy",n.ordersTrackBy),i.zb(5),i.uc(i.dc(13,9,n.customer.orderTotal,"USD","symbol"))}}function m(e,t){if(1&e&&(i.Qb(0,"div",2),i.Qb(1,"span"),i.tc(2,"No orders found."),i.Pb(),i.Qb(3,"a",7),i.tc(4,"Add Order?"),i.Pb(),i.Pb()),2&e){var n=i.ac();i.zb(3),i.hc("routerLink","/orders/add/",n.customer.id,"")}}function g(e,t){1&e&&(i.Qb(0,"div",2),i.tc(1," No customer found "),i.Pb())}var f,v=((f=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.dataService=n,this.router=r,this.orders=[]}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){e.dataService.getCustomer(+t.id).subscribe((function(t){e.customer=t}))}))}},{key:"ordersTrackBy",value:function(e,t){return e}}]),e}()).\u0275fac=function(e){return new(e||f)(i.Kb(o.a),i.Kb(s.a),i.Kb(o.b))},f.\u0275cmp=i.Eb({type:f,selectors:[["cm-customer-orders"]],decls:4,vars:3,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"table","table-striped","table-hover","orders-table"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"summary-border"],[1,"text-right"],[3,"routerLink"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.sc(1,d,14,13,"div",1),i.sc(2,m,5,1,"div",1),i.sc(3,g,2,0,"div",1),i.Pb()),2&e&&(i.zb(1),i.gc("ngIf",t.customer&&t.customer.orders),i.zb(1),i.gc("ngIf",t.customer&&!t.customer.orders),i.zb(1),i.gc("ngIf",!t.customer))},directives:[b.l,b.k,o.d],pipes:[u.a,b.c],encapsulation:2}),f),p=n("mrSG"),h=["mapsContainer"];function P(e,t){if(1&e&&(i.Qb(0,"div",2),i.Qb(1,"div",6),i.Lb(2,"img",7),i.bc(3,"lowercase"),i.Pb(),i.Qb(4,"div",8),i.Qb(5,"h4"),i.tc(6),i.bc(7,"capitalize"),i.bc(8,"capitalize"),i.Pb(),i.Lb(9,"br"),i.tc(10),i.Lb(11,"br"),i.tc(12),i.Pb(),i.Pb()),2&e){var n=i.ac();i.zb(2),i.hc("src","assets/images/",i.cc(3,6,n.customer.gender),".png",i.oc),i.zb(4),i.wc(" ",i.cc(7,8,n.customer.firstName)," ",i.cc(8,10,n.customer.lastName),"\xa0 "),i.zb(4),i.vc(" ",n.customer.address," "),i.zb(2),i.wc(" ",n.customer.city,", ",n.customer.state.name," ")}}function C(e,t){1&e&&(i.Qb(0,"div",0),i.tc(1," No customer found\n"),i.Pb())}var y,Q=((y=function(){function e(t,n,r){_classCallCheck(this,e),this.route=t,this.dataService=n,this.componentFactoryResolver=r}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){var n=+t.id;n&&e.dataService.getCustomer(n).subscribe((function(t){e.customer=t,e.customer&&e.customer.latitude&&e.lazyLoadMapComponent()}))}))}},{key:"lazyLoadMapComponent",value:function(){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.mapsViewContainerRef.length){e.next=8;break}return e.next=3,n.e(2).then(n.bind(null,"ISAC"));case 3:t=e.sent,r=t.MapComponent,console.log("Lazy loaded map component!"),c=this.componentFactoryResolver.resolveComponentFactory(r),this.mapComponentRef=this.mapsViewContainerRef.createComponent(c),this.mapComponentRef.instance.zoom=10,this.mapComponentRef.instance.customer=this.customer,this.mapComponentRef.instance.enabled=!0;case 8:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||y)(i.Kb(o.a),i.Kb(s.a),i.Kb(i.j))},y.\u0275cmp=i.Eb({type:y,selectors:[["cm-customer-details"]],viewQuery:function(e,t){var n;1&e&&i.xc(h,!0,i.N),2&e&&i.lc(n=i.Zb())&&(t.mapsViewContainerRef=n.first)},decls:10,vars:2,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],["mapsContainer",""],["class","container",4,"ngIf"],[1,"col-md-2"],[1,"details-image",3,"src"],[1,"col-md-10"]],template:function(e,t){1&e&&(i.Qb(0,"div",0),i.sc(1,P,13,12,"div",1),i.Lb(2,"br"),i.Lb(3,"br"),i.Qb(4,"div",2),i.Qb(5,"div",3),i.Qb(6,"div"),i.Mb(7,null,4),i.Pb(),i.Pb(),i.Pb(),i.Pb(),i.sc(9,C,2,0,"div",5)),2&e&&(i.zb(1),i.gc("ngIf",t.customer),i.zb(8),i.gc("ngIf",!t.customer))},directives:[b.l],pipes:[b.i,u.a],styles:[".details-image[_ngcontent-%COMP%]{height:100px;width:100px;margin-top:10px}"]}),y),M=n("+qzk"),k=n("9nld"),w=n("OsF4"),z=n("3Pt+"),L=["customerForm"];function O(e,t){if(1&e&&(i.Qb(0,"option",16),i.tc(1),i.Pb()),2&e){var n=t.$implicit;i.gc("ngValue",n.abbreviation),i.zb(1),i.uc(n.name)}}function I(e,t){if(1&e){var n=i.Rb();i.Qb(0,"div",20),i.tc(1," Delete Customer?\xa0\xa0"),i.Qb(2,"button",21),i.Yb("click",(function(e){return i.nc(n),i.ac(2).delete(e)})),i.tc(3,"Yes"),i.Pb(),i.tc(4,"\xa0\xa0 "),i.Qb(5,"button",22),i.Yb("click",(function(){return i.nc(n),i.ac(2).deleteMessageEnabled=!1})),i.tc(6,"No"),i.Pb(),i.Pb()}}function _(e,t){if(1&e){var n=i.Rb();i.Qb(0,"button",21),i.Yb("click",(function(){return i.nc(n),i.ac(2).deleteMessageEnabled=!0})),i.tc(1,"Delete"),i.Pb()}}function N(e,t){if(1&e){var n=i.Rb();i.Qb(0,"div",23),i.Qb(1,"button",22),i.Yb("click",(function(e){return i.nc(n),i.ac(2).cancel(e)})),i.tc(2,"Cancel"),i.Pb(),i.tc(3,"\xa0\xa0 "),i.Qb(4,"button",24),i.tc(5),i.Pb(),i.Pb()}if(2&e){var r=i.ac(2),c=i.mc(2);i.zb(4),i.gc("disabled",c.pristine||!c.valid),i.zb(1),i.uc(r.operationText)}}function F(e,t){if(1&e&&(i.Qb(0,"div"),i.sc(1,I,7,0,"div",17),i.sc(2,_,2,0,"button",18),i.tc(3,"\xa0\xa0 "),i.sc(4,N,6,2,"div",19),i.Pb()),2&e){var n=i.ac();i.zb(1),i.gc("ngIf",n.customer.id&&n.deleteMessageEnabled),i.zb(1),i.gc("ngIf",n.customer.id&&!n.deleteMessageEnabled),i.zb(2),i.gc("ngIf",!n.deleteMessageEnabled)}}function S(e,t){if(1&e&&(i.Qb(0,"div",25),i.tc(1),i.Pb()),2&e){var n=i.ac();i.zb(1),i.uc(n.errorMessage)}}var x,K,R,q=((x=function(){function e(t,n,r,c,o,i){_classCallCheck(this,e),this.router=t,this.route=n,this.dataService=r,this.growler=c,this.modalService=o,this.logger=i,this.customer={id:0,firstName:"",lastName:"",gender:"",address:"",city:"",state:{abbreviation:"",name:""}},this.operationText="Insert"}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.route.parent.params.subscribe((function(t){var n=+t.id;0!==n&&(e.operationText="Update",e.getCustomer(n))})),this.dataService.getStates().subscribe((function(t){return e.states=t}))}},{key:"getCustomer",value:function(e){var t=this;this.dataService.getCustomer(e).subscribe((function(e){t.customer=e}))}},{key:"submit",value:function(){var e=this;0===this.customer.id?this.dataService.insertCustomer(this.customer).subscribe((function(t){if(t)e.customerForm.form.markAsPristine(),e.router.navigate(["/customers"]);else{var n="Unable to insert customer";e.growler.growl(n,M.a.Danger),e.errorMessage=n}}),(function(t){return e.logger.log(t)})):this.dataService.updateCustomer(this.customer).subscribe((function(t){if(t)e.customerForm.form.markAsPristine(),e.growler.growl("Operation performed successfully.",M.a.Success);else{var n="Unable to update customer";e.growler.growl(n,M.a.Danger),e.errorMessage=n}}),(function(t){return e.logger.log(t)}))}},{key:"cancel",value:function(e){e.preventDefault(),this.router.navigate(["/customers"])}},{key:"delete",value:function(e){var t=this;e.preventDefault(),this.dataService.deleteCustomer(this.customer.id).subscribe((function(e){e?t.router.navigate(["/customers"]):t.errorMessage="Unable to delete customer"}),(function(e){return t.logger.log(e)}))}},{key:"canDeactivate",value:function(){return!this.customerForm.dirty||this.modalService.show({header:"Lose Unsaved Changes?",body:"You have unsaved changes! Would you like to leave the page and lose them?",cancelButtonText:"Cancel",OKButtonText:"Leave"})}}]),e}()).\u0275fac=function(e){return new(e||x)(i.Kb(o.b),i.Kb(o.a),i.Kb(s.a),i.Kb(M.b),i.Kb(k.a),i.Kb(w.a))},x.\u0275cmp=i.Eb({type:x,selectors:[["cm-customer-edit"]],viewQuery:function(e,t){var n;1&e&&i.qc(L,!0),2&e&&i.lc(n=i.Zb())&&(t.customerForm=n.first)},decls:39,vars:12,consts:[["novalidate","",1,"customer-form",3,"ngSubmit"],["customerForm","ngForm"],[1,"form-group"],["type","text","name","firstName","required","",1,"form-control",3,"ngModel","ngModelChange"],["firstName","ngModel"],[1,"alert","alert-danger",3,"hidden"],["type","text","name","lastName","required","",1,"form-control",3,"ngModel","ngModelChange"],["lastName","ngModel"],["type","text","name","address","required","",1,"form-control",3,"ngModel","ngModelChange"],["address","ngModel"],["type","text","name","city","required","",1,"form-control",3,"ngModel","ngModelChange"],["city","ngModel"],["name","state","required","",1,"form-control",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[4,"ngIf"],["class","alert alert-danger",4,"ngIf"],[3,"ngValue"],["class","alert alert-warning",4,"ngIf"],["class","btn btn-danger",3,"click",4,"ngIf"],["class","pull-right",4,"ngIf"],[1,"alert","alert-warning"],[1,"btn","btn-danger",3,"click"],[1,"btn","btn-default",3,"click"],[1,"pull-right"],["type","submit",1,"btn","btn-success",3,"disabled"],[1,"alert","alert-danger"]],template:function(e,t){if(1&e&&(i.Qb(0,"div"),i.Qb(1,"form",0,1),i.Yb("ngSubmit",(function(){return t.submit()})),i.Qb(3,"div",2),i.Qb(4,"label"),i.tc(5,"First Name"),i.Pb(),i.Qb(6,"input",3,4),i.Yb("ngModelChange",(function(e){return t.customer.firstName=e})),i.Pb(),i.Qb(8,"div",5),i.tc(9,"First Name is required"),i.Pb(),i.Pb(),i.Qb(10,"div",2),i.Qb(11,"label"),i.tc(12,"Last Name"),i.Pb(),i.Qb(13,"input",6,7),i.Yb("ngModelChange",(function(e){return t.customer.lastName=e})),i.Pb(),i.Qb(15,"div",5),i.tc(16,"Last Name is required"),i.Pb(),i.Pb(),i.Qb(17,"div",2),i.Qb(18,"label"),i.tc(19,"Address"),i.Pb(),i.Qb(20,"input",8,9),i.Yb("ngModelChange",(function(e){return t.customer.address=e})),i.Pb(),i.Qb(22,"div",5),i.tc(23,"Address is required"),i.Pb(),i.Pb(),i.Qb(24,"div",2),i.Qb(25,"label"),i.tc(26,"City"),i.Pb(),i.Qb(27,"input",10,11),i.Yb("ngModelChange",(function(e){return t.customer.city=e})),i.Pb(),i.Qb(29,"div",5),i.tc(30,"City is required"),i.Pb(),i.Pb(),i.Qb(31,"div",2),i.Qb(32,"label"),i.tc(33,"State"),i.Pb(),i.Qb(34,"select",12),i.Yb("ngModelChange",(function(e){return t.customer.state.abbreviation=e})),i.sc(35,O,2,2,"option",13),i.Pb(),i.Pb(),i.sc(36,F,5,3,"div",14),i.sc(37,S,2,1,"div",15),i.Pb(),i.Lb(38,"br"),i.Pb()),2&e){var n=i.mc(7),r=i.mc(14),c=i.mc(21),o=i.mc(28);i.zb(6),i.gc("ngModel",t.customer.firstName),i.zb(2),i.gc("hidden",n.pristine||n.valid),i.zb(5),i.gc("ngModel",t.customer.lastName),i.zb(2),i.gc("hidden",r.pristine||r.valid),i.zb(5),i.gc("ngModel",t.customer.address),i.zb(2),i.gc("hidden",c.pristine||c.valid),i.zb(5),i.gc("ngModel",t.customer.city),i.zb(2),i.gc("hidden",o.pristine||o.valid),i.zb(5),i.gc("ngModel",t.customer.state.abbreviation),i.zb(1),i.gc("ngForOf",t.states),i.zb(1),i.gc("ngIf",t.customer),i.zb(1),i.gc("ngIf",null!=t.errorMessage)}},directives:[z.r,z.i,z.j,z.a,z.n,z.h,z.k,z.o,b.k,b.l,z.l,z.q],styles:[".customer-form[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%], .customer-form[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .customer-form[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .customer-form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}.customer-form[_ngcontent-%COMP%]   .ng-invalid[_ngcontent-%COMP%]{border-left:5px solid #a94442}.customer-form[_ngcontent-%COMP%]   .ng-valid[_ngcontent-%COMP%]{border-left:5px solid #42a948}"]}),x),A=n("uBHf"),E=n("wNMA"),T=[{path:"",component:a,children:[{path:"orders",component:v},{path:"details",component:Q},{path:"edit",component:q,canActivate:[A.a],canDeactivate:[E.a]}]}],Y=((R=function e(){_classCallCheck(this,e)}).components=[a,v,Q,q],R.\u0275mod=i.Ib({type:R}),R.\u0275inj=i.Hb({factory:function(e){return new(e||R)},providers:[A.a,E.a],imports:[[o.e.forChild(T)],o.e]}),R),D=((K=function e(){_classCallCheck(this,e)}).\u0275mod=i.Ib({type:K}),K.\u0275inj=i.Hb({factory:function(e){return new(e||K)},imports:[[Y,c.a]]}),K)}}]);